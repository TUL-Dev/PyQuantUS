

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2D DCE-US GUI Example &mdash; QuantUS 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=f2a433a1"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="3D DCE-US GUI Example" href="guiDceus3d.html" />
    <link rel="prev" title="2D UTC GUI Example" href="guiUtc.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="cliUtc.html">2D UTC CLI Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="guiUtc.html">2D UTC GUI Example</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">2D DCE-US GUI Example</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#image-selection">Image Selection</a></li>
<li class="toctree-l3"><a class="reference internal" href="#region-of-interest-selection">Region of Interest Selection</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tic-modification">TIC Modification</a></li>
<li class="toctree-l3"><a class="reference internal" href="#analysis-results">Analysis Results</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="guiDceus3d.html">3D DCE-US GUI Example</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">PyQuantUS API</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">QuantUS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Examples</a></li>
      <li class="breadcrumb-item active">2D DCE-US GUI Example</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/TUL-Dev/PyQuantUS/blob/main/docs/source/usage/guiDceus2d.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="d-dce-us-gui-example">
<h1>2D DCE-US GUI Example<a class="headerlink" href="#d-dce-us-gui-example" title="Link to this heading"></a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>This tutorial is a sample walkthrough of time intensity curve (TIC) analysis of a bolus injection captured in a
2D dynamic contrast enhanced ultrasound (DCE-US) cine loop. This example uses the optional motion compensation
feature on data stored in NIfTI format. For reference, the sample data used in this example can be found here.</p>
</section>
<section id="image-selection">
<h2>Image Selection<a class="headerlink" href="#image-selection" title="Link to this heading"></a></h2>
<p>After opening the QuantUS GUI, we can begin by selecting <cite>2D Dynamic Contrast-Enhanced Ultrasound (DCE-US) with Motion Correction</cite>
from the main menu. From here, we can select the <cite>NIFTI</cite> button to choose the appropriate parser for this set of analysis.
Once we input the B-Mode and DCE-US cine loops, we click <cite>Generate Image</cite> to parse the data.</p>
<p>After the ultrasound parser loads, the cine loops will be displayed in the main window, as shown below.</p>
<a class="reference internal image-reference" href="../_images/loadedIm2dDceus.png"><img alt="Loaded Image" class="align-center" src="../_images/loadedIm2dDceus.png" style="width: 750px;" />
</a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>In this case, the division between the B-Mode and DCE-US videos are not pre-defined, so we must manually delineate them.
This step is important for the accuracy of our segmentations later in this example, as it enables us to
translate coordinates between the B-Mode and DCE-US images.</p>
</section>
<section id="region-of-interest-selection">
<h2>Region of Interest Selection<a class="headerlink" href="#region-of-interest-selection" title="Link to this heading"></a></h2>
<p>Following the analysis progression on the left side of the GUI, we now move to Region of Interest (ROI) selection.
The ROI determines which segmentation of the inputted image we will use to compute the TIC in our analysis.</p>
<p>On the GUI, the <cite>New ROI</cite> button enables us to draw a free-handed spline to define the ROI. As detailed in the image
below, this free-handed ROI will be drawn on a single frame in the cine loop. From here, the user can choose a constant
ROI where each frame has the same ROI, or the user can <cite>fit to ROI</cite> using motion correction, so that in each frame, the ROI
covers the area that most closely matches the ROI in the frame drawn. Note that in all of these cases, the ROI should be drawn
on the B-Mode image. The ROI will later be translated onto the DCE-US image when the TIC is computed.</p>
<a class="reference internal image-reference" href="../_images/drawingRoi2dDceus.png"><img alt="Drawing ROI on GUI" class="align-center" src="../_images/drawingRoi2dDceus.png" style="width: 750px;" />
</a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>After we enable motion correction by pressing the <cite>fit to ROI</cite> button, the results of the motion correction are displayed
as follows. Note that the green rectangle within the white rectangle denotes the accepted ROI for the current frame, and the
purple rectangle corresponds to that ROI translated on the DCE-US image. In frames where there is no match with the frame where
the ROI was drawn, a red box will appear and this frame will be excluded from the analysis.</p>
<a class="reference internal image-reference" href="../_images/mcResults.png"><img alt="Motion Correction Results" class="align-center" src="../_images/mcResults.png" style="width: 750px;" />
</a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Once we are satisfied with our ROI, we can click the <cite>Save ROI</cite> button to save the ROI for later use.
Also, we can click the <cite>Accept Generated ROI</cite> button to move to the next step of the analysis.</p>
</section>
<section id="tic-modification">
<h2>TIC Modification<a class="headerlink" href="#tic-modification" title="Link to this heading"></a></h2>
<p>On this screen, we start with the option of manually selecting a t0 for the TIC analysis, or automatically selecting
one later. In this context, t0 corresponds to the start point we use when we fit a lognormal curve to the TIC data to
quantitatively model the bolus injection. In this case, we opt to automatically select t0 later, as this will be optimized
for us.</p>
<a class="reference internal image-reference" href="../_images/ticBolus2dDceus.png"><img alt="TIC Modification" class="align-center" src="../_images/ticBolus2dDceus.png" style="width: 750px;" />
</a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>From here, we can select points in the TIC to exclude from the analysis by dragging a rectangle over them and pressing the
<cite>Remove Selected Points</cite> button. This is useful for removing outliers or other points that may skew the analysis.</p>
<p>Also, notice how there appears to have been significant motion between roughly the 18th and 21st seconds, as our motion
correction output skipped these frames. This can be investigated more by clicking on individual points on the TIC plot,
which will cause the cine loop above the TIC plot to move to the frame corresponding to that point.</p>
<p>Finally, we can click the <cite>Accept TIC</cite> button to fit a lognormal curve to our modified TIC and view our results.</p>
</section>
<section id="analysis-results">
<h2>Analysis Results<a class="headerlink" href="#analysis-results" title="Link to this heading"></a></h2>
<p>After performing the lognormal curve fitting, the area under the curve (AUC), peak enhancement (PE), time to peak (TP),
mean transit-time (MTT), t0, and ROI area are displayed by pressing the <cite>Show TIC</cite> button in the new screen. A visual
of our curve fit is also displayed, as shown below.</p>
<a class="reference internal image-reference" href="../_images/2dDceusResults.png"><img alt="TIC Results" class="align-center" src="../_images/2dDceusResults.png" style="width: 750px;" />
</a>
<p>Also, note an optional parametric map can be computed and displayed using the <cite>Generate Paramap</cite> and <cite>Load Parametric Map</cite>
buttons. This feature is currently only available for constant (not motion corrected) ROIs. It works by segmenting the constant
ROI into smaller ROIs and running TIC analysis on each of these smaller ROIs. Note the TIC for each of these small ROIs
must be unmodified, so this feature is best used for non-noisy data. This feature is useful for visualizing the spatial
relationships between the TIC parameters, but is highly computationally intensive and should be used with caution.</p>
<p>Finally, we can save the TIC parameters for the entire ROI into a CSV file by first pressing the <cite>Save Data</cite> button and then
pressing the <cite>Export Data</cite> button. This will enable a direct link to a CSV file which can store data from multiple analyses.
A CLI is also currently under development to streamline this pipeline using batch processing.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="guiUtc.html" class="btn btn-neutral float-left" title="2D UTC GUI Example" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="guiDceus3d.html" class="btn btn-neutral float-right" title="3D DCE-US GUI Example" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, David Spector.
      <span class="lastupdated">Last updated on Jun 23, 2025.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>